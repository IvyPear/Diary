(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function e(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=e(n);fetch(n.href,i)}})();class w{static get(t,e=null){try{const o=localStorage.getItem(t);return o?JSON.parse(o):e}catch(o){return console.error(`L·ªói khi ƒë·ªçc ${t}:`,o),e}}static set(t,e){try{return localStorage.setItem(t,JSON.stringify(e)),!0}catch(o){return console.error(`L·ªói khi l∆∞u ${t}:`,o),!1}}static remove(t){localStorage.removeItem(t)}static clear(){localStorage.clear()}static getAllData(){return{diaryEntries:this.get("diaryEntries",[]),moments:this.get("moments",[]),settings:this.get("diarySettings",{}),exportDate:new Date().toISOString()}}static initializeDefaults(){this.get("diaryEntries")||this.set("diaryEntries",[]),this.get("moments")||this.set("moments",[]),this.get("diarySettings")||this.set("diarySettings",{theme:"mint"})}}function z(){const a=w.get("diarySettings",{theme:"mint"}).theme;D(a)}function D(a){var o;console.log("Setting theme to:",a),document.body.classList.remove("theme-mint","theme-pink","theme-lavender","theme-ocean","theme-night"),document.body.classList.add(`theme-${a}`),window.APP_STATE&&(window.APP_STATE.currentTheme=a);const t=w.get("diarySettings",{});t.theme=a,w.set("diarySettings",t);const e=document.getElementById("theme-panel");e&&e.classList.add("hidden"),window.ChartManager&&((o=window.APP_STATE)==null?void 0:o.currentView)==="report"&&setTimeout(()=>{window.ChartManager.drawCharts()},100),W()}function W(){const a=getComputedStyle(document.body).getPropertyValue("--accent-light"),t=getComputedStyle(document.body).getPropertyValue("--button-bg");document.querySelectorAll(".mood-btn").forEach(e=>{e.classList.contains("ring-4")?e.style.backgroundColor=t:e.style.backgroundColor=a})}class p{static calculateStreak(){const t=w.get("diaryEntries",[]);if(t.length===0)return 0;const e=new Set(t.map(s=>s.date)),o=Array.from(e).map(s=>{const[c,r,d]=s.split("/").map(Number);return new Date(d,r-1,c)}).sort((s,c)=>c-s);let n=0;const i=new Date;i.setHours(0,0,0,0);for(let s=0;s<o.length;s++){const c=new Date(i);if(c.setDate(c.getDate()-s),c.setHours(0,0,0,0),o[s].getTime()===c.getTime())n++;else break}return n}static updateStreakCounter(){const t=this.calculateStreak(),e=document.getElementById("streak-counter");e&&(e.innerHTML=`üî• ${t} ng√†y li√™n ti·∫øp`,t>0&&e.classList.add("animate-pulse"))}static setupPhotoUpload(){document.querySelectorAll(".photo-upload").forEach((t,e)=>{t.onclick=null,!t.querySelector("img")&&t.addEventListener("click",()=>{const o=document.createElement("input");o.type="file",o.accept="image/*",o.multiple=!1,o.onchange=n=>{const i=n.target.files[0];if(i){const s=new FileReader;s.onload=c=>{t.innerHTML=`
                                <img src="${c.target.result}" 
                                     alt="Uploaded photo ${e+1}" 
                                     class="w-full h-full object-cover rounded-[16px] shadow-image">
                                <button class="delete-photo absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-70 hover:opacity-100 transition-opacity">
                                    <i data-lucide="x" class="w-3 h-3"></i>
                                </button>
                            `,t.classList.add("image-hover","has-image");const r=t.querySelector(".delete-photo");r.onclick=d=>{d.stopPropagation(),t.innerHTML=`
                                    <div class="w-full h-full flex flex-col items-center justify-center">
                                        <i data-lucide="plus" class="w-8 h-8 mb-1"></i>
                                        <span class="text-xs">·∫¢nh ${e+1}</span>
                                    </div>
                                `,t.classList.remove("image-hover","has-image"),lucide==null||lucide.createIcons()}},s.readAsDataURL(i)}},o.click()})})}static exportData(){try{const t=w.getAllData(),e=JSON.stringify(t,null,2),o=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(o),i=document.createElement("a");return i.href=n,i.download=`diary-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n),p.showNotification("D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c xu·∫•t th√†nh c√¥ng! üì•","success"),!0}catch(t){return console.error("L·ªói khi xu·∫•t d·ªØ li·ªáu:",t),p.showNotification("L·ªói: Kh√¥ng th·ªÉ xu·∫•t d·ªØ li·ªáu","error"),!1}}static showNotification(t,e="info"){let o=document.getElementById("notification-container");o||(o=document.createElement("div"),o.id="notification-container",o.className="fixed top-4 right-4 z-50 space-y-2",document.body.appendChild(o));const n=document.createElement("div");n.className=`p-4 rounded-lg shadow-lg mb-2 animate-slideInUp ${e==="success"?"bg-green-100 text-green-800 border border-green-200":e==="error"?"bg-red-100 text-red-800 border border-red-200":e==="warning"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,n.innerHTML=`
            <div class="flex items-center space-x-2">
                <span>${t}</span>
            </div>
        `,o.appendChild(n),setTimeout(()=>{n.style.opacity="0",n.style.transform="translateX(100%)",n.style.transition="all 0.3s ease",setTimeout(()=>{n.remove()},300)},3e3)}}class A{static saveDailyEntry(){var c,r,d,l,f,h,b,y,g;const t=new Date,e=t.toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit"}),o=document.getElementById("current-date");o&&(o.textContent=e);const n=document.querySelector(".mood-btn.ring-4"),i=n?n.dataset.mood:"üòä",s={id:`entry_${t.getTime()}_${Math.random().toString(36).substr(2,9)}`,date:e,mood:i,achievements:((c=document.getElementById("achievements"))==null?void 0:c.value.trim())||"",stress:((r=document.getElementById("stress"))==null?void 0:r.value.trim())||"",gratitude1:((d=document.getElementById("gratitude1"))==null?void 0:d.value.trim())||"",gratitude2:((l=document.getElementById("gratitude2"))==null?void 0:l.value.trim())||"",gratitude3:((f=document.getElementById("gratitude3"))==null?void 0:f.value.trim())||"",selfCare:Array.from(document.querySelectorAll(".pastel-checkbox input:checked")).map(u=>u.value),highlight:((h=document.getElementById("highlight"))==null?void 0:h.value.trim())||"",photos:Array.from(document.querySelectorAll(".photo-upload img")).map(u=>u.src).filter(u=>!u.includes("plus")&&!u.includes("data:image/svg+xml")),content:((b=document.getElementById("content"))==null?void 0:b.value.trim())||"",timestamp:t.getTime(),theme:((y=document.body.className.match(/theme-(\w+)/))==null?void 0:y[1])||"mint"};if(!s.content||s.content.trim().length<5)return p.showNotification("Vui l√≤ng vi·∫øt n·ªôi dung nh·∫≠t k√Ω (√≠t nh·∫•t 5 k√Ω t·ª±)","warning"),(g=document.getElementById("content"))==null||g.focus(),!1;try{let u=w.get("diaryEntries",[]);const m=u.findIndex(E=>E.date===e);m>=0?(u[m]=s,p.showNotification("ƒê√£ c·∫≠p nh·∫≠t nh·∫≠t k√Ω h√¥m nay! ‚ú®","success")):(u.unshift(s),p.showNotification("Nh·∫≠t k√Ω ƒë√£ ƒë∆∞·ª£c l∆∞u th√†nh c√¥ng! ‚ú®","success")),w.set("diaryEntries",u),s.highlight&&s.highlight.trim().length>0&&this.saveHighlightAsMoment(s);const v=document.querySelector("#diary-page button");return v&&(v.classList.add("success-pulse"),setTimeout(()=>v.classList.remove("success-pulse"),2e3)),typeof window.APP_STATE<"u"&&window.APP_STATE.currentView==="timeline"&&setTimeout(()=>{typeof window.TimelineManager<"u"&&window.TimelineManager.loadTimelineEntries()},500),this.resetForm(),typeof window.Utils<"u"&&window.Utils.updateStreakCounter(),!0}catch(u){return console.error("L·ªói khi l∆∞u entry:",u),p.showNotification("L·ªói: Kh√¥ng th·ªÉ l∆∞u nh·∫≠t k√Ω","error"),!1}}static saveHighlightAsMoment(t){const e={id:`moment_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:t.highlight.substring(0,50),description:`T·ª´ nh·∫≠t k√Ω ng√†y ${t.date}: ${t.content.substring(0,100)}...`,date:t.date,mood:t.mood,type:"highlight",timestamp:t.timestamp};let o=w.get("moments",[]);o.unshift(e),w.set("moments",o)}static resetForm(){["achievements","stress","gratitude1","gratitude2","gratitude3","highlight","content"].forEach(i=>{const s=document.getElementById(i);s&&(s.value="")});const e=getComputedStyle(document.body).getPropertyValue("--accent-light");document.querySelectorAll(".mood-btn").forEach(i=>{i.style.backgroundColor=e,i.classList.remove("ring-4","ring-offset-2","ring-accent-light/50")});const o=document.querySelector('.mood-btn[data-mood="üòä"]');if(o){const i=getComputedStyle(document.body).getPropertyValue("--button-bg");o.style.backgroundColor=i,o.classList.add("ring-4","ring-offset-2","ring-accent-light/50")}document.querySelectorAll('.pastel-checkbox input[type="checkbox"]').forEach(i=>{i.checked=!1}),document.querySelectorAll(".photo-upload").forEach((i,s)=>{i.innerHTML=`
                <div class="w-full h-full flex flex-col items-center justify-center">
                    <i data-lucide="plus" class="w-8 h-8 mb-1"></i>
                    <span class="text-xs">·∫¢nh ${s+1}</span>
                </div>
            `,i.classList.remove("image-hover","has-image")});const n=document.getElementById("save-status");n&&(n.textContent="S·∫µn s√†ng cho ng√†y m·ªõi!",n.classList.add("text-green-500"),setTimeout(()=>{n.classList.remove("text-green-500"),n.textContent="ƒê√£ l∆∞u t·ª± ƒë·ªông"},2e3)),setTimeout(()=>{var i;(i=document.getElementById("content"))==null||i.focus()},300),typeof lucide<"u"&&lucide.createIcons(),setTimeout(()=>{p.setupPhotoUpload()},100)}static loadTodayEntry(){const e=new Date().toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit"}),o=document.getElementById("current-date");o&&(o.textContent=e);const i=w.get("diaryEntries",[]).find(s=>s.date===e);if(i){const s={achievements:i.achievements||"",stress:i.stress||"",gratitude1:i.gratitude1||"",gratitude2:i.gratitude2||"",gratitude3:i.gratitude3||"",highlight:i.highlight||"",content:i.content||""};Object.entries(s).forEach(([r,d])=>{const l=document.getElementById(r);l&&(l.value=d)});const c=document.querySelector(`.mood-btn[data-mood="${i.mood}"]`);if(c){const r=getComputedStyle(document.body).getPropertyValue("--button-bg"),d=getComputedStyle(document.body).getPropertyValue("--accent-light");document.querySelectorAll(".mood-btn").forEach(l=>{l.style.backgroundColor=d,l.classList.remove("ring-4","ring-offset-2","ring-accent-light/50")}),c.style.backgroundColor=r,c.classList.add("ring-4","ring-offset-2","ring-accent-light/50")}if(i.selfCare&&document.querySelectorAll('.pastel-checkbox input[type="checkbox"]').forEach(r=>{r.checked=i.selfCare.includes(r.value)}),i.photos&&i.photos.length>0){const r=document.querySelectorAll(".photo-upload");i.photos.slice(0,3).forEach((d,l)=>{if(r[l]){r[l].innerHTML=`
                            <img src="${d}" 
                                 alt="Uploaded photo ${l+1}" 
                                 class="w-full h-full object-cover rounded-[16px] shadow-image">
                            <button class="delete-photo absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-70 hover:opacity-100 transition-opacity">
                                <i data-lucide="x" class="w-3 h-3"></i>
                            </button>
                        `,r[l].classList.add("image-hover","has-image");const f=r[l].querySelector(".delete-photo");f&&(f.onclick=h=>{h.stopPropagation();const b=`
                                    <div class="w-full h-full flex flex-col items-center justify-center">
                                        <i data-lucide="plus" class="w-8 h-8 mb-1"></i>
                                        <span class="text-xs">·∫¢nh ${l+1}</span>
                                    </div>
                                `;r[l].innerHTML=b,r[l].classList.remove("image-hover","has-image"),typeof lucide<"u"&&lucide.createIcons()})}})}}else this.resetFormForNewDay();setTimeout(()=>{p.setupPhotoUpload()},100)}static resetFormForNewDay(){["achievements","stress","gratitude1","gratitude2","gratitude3","highlight","content"].forEach(n=>{const i=document.getElementById(n);i&&(i.value="")}),document.querySelectorAll('.pastel-checkbox input[type="checkbox"]').forEach(n=>{n.checked=!1}),document.querySelectorAll(".photo-upload").forEach((n,i)=>{n.innerHTML=`
                <div class="w-full h-full flex flex-col items-center justify-center">
                    <i data-lucide="plus" class="w-8 h-8 mb-1"></i>
                    <span class="text-xs">·∫¢nh ${i+1}</span>
                </div>
            `,n.classList.remove("image-hover","has-image")});const e=document.querySelector('.mood-btn[data-mood="üòä"]');if(e){const n=getComputedStyle(document.body).getPropertyValue("--button-bg"),i=getComputedStyle(document.body).getPropertyValue("--accent-light");document.querySelectorAll(".mood-btn").forEach(s=>{s.style.backgroundColor=i,s.classList.remove("ring-4","ring-offset-2","ring-accent-light/50")}),e.style.backgroundColor=n,e.classList.add("ring-4","ring-offset-2","ring-accent-light/50")}const o=document.getElementById("save-status");o&&(o.textContent="S·∫µn s√†ng vi·∫øt nh·∫≠t k√Ω!",o.classList.add("text-blue-500"),setTimeout(()=>{o.classList.remove("text-blue-500"),o.textContent="ƒê√£ l∆∞u t·ª± ƒë·ªông"},2e3)),setTimeout(()=>{var n;(n=document.getElementById("content"))==null||n.focus()},300),typeof lucide<"u"&&lucide.createIcons()}static deleteEntry(t){try{let e=w.get("diaryEntries",[]);const o=e.length;return e=e.filter(n=>n.id!==t),e.length<o?(w.set("diaryEntries",e),typeof window.APP_STATE<"u"&&window.APP_STATE.currentView==="timeline"&&setTimeout(()=>{typeof window.TimelineManager<"u"&&window.TimelineManager.loadTimelineEntries()},100),typeof window.APP_STATE<"u"&&window.APP_STATE.currentView==="report"&&setTimeout(()=>{typeof window.ChartManager<"u"&&window.ChartManager.drawCharts()},100),p.showNotification("ƒê√£ x√≥a nh·∫≠t k√Ω th√†nh c√¥ng","success"),!0):(p.showNotification("Kh√¥ng t√¨m th·∫•y nh·∫≠t k√Ω ƒë·ªÉ x√≥a","error"),!1)}catch(e){return console.error("L·ªói khi x√≥a entry:",e),p.showNotification("L·ªói: Kh√¥ng th·ªÉ x√≥a nh·∫≠t k√Ω","error"),!1}}static loadEntryForEdit(t){try{const o=w.get("diaryEntries",[]).find(r=>r.id===t);if(!o)return p.showNotification("Kh√¥ng t√¨m th·∫•y nh·∫≠t k√Ω","error"),!1;typeof window.switchView<"u"&&window.switchView("diary");const n=document.getElementById("current-date");n&&(n.textContent=o.date);const i={achievements:o.achievements||"",stress:o.stress||"",gratitude1:o.gratitude1||"",gratitude2:o.gratitude2||"",gratitude3:o.gratitude3||"",highlight:o.highlight||"",content:o.content||""};Object.entries(i).forEach(([r,d])=>{const l=document.getElementById(r);l&&(l.value=d)});const s=document.querySelector(`.mood-btn[data-mood="${o.mood}"]`);if(s){const r=getComputedStyle(document.body).getPropertyValue("--button-bg"),d=getComputedStyle(document.body).getPropertyValue("--accent-light");document.querySelectorAll(".mood-btn").forEach(l=>{l.style.backgroundColor=d,l.classList.remove("ring-4","ring-offset-2","ring-accent-light/50")}),s.style.backgroundColor=r,s.classList.add("ring-4","ring-offset-2","ring-accent-light/50")}if(document.querySelectorAll('.pastel-checkbox input[type="checkbox"]').forEach(r=>{var d;r.checked=((d=o.selfCare)==null?void 0:d.includes(r.value))||!1}),document.querySelectorAll(".photo-upload").forEach((r,d)=>{r.innerHTML=`
                    <div class="w-full h-full flex flex-col items-center justify-center">
                        <i data-lucide="plus" class="w-8 h-8 mb-1"></i>
                        <span class="text-xs">·∫¢nh ${d+1}</span>
                    </div>
                `,r.classList.remove("image-hover","has-image")}),o.photos&&o.photos.length>0){const r=document.querySelectorAll(".photo-upload");o.photos.slice(0,3).forEach((d,l)=>{if(r[l]){r[l].innerHTML=`
                            <img src="${d}" 
                                 alt="Uploaded photo ${l+1}" 
                                 class="w-full h-full object-cover rounded-[16px] shadow-image">
                            <button class="delete-photo absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-70 hover:opacity-100 transition-opacity">
                                <i data-lucide="x" class="w-3 h-3"></i>
                            </button>
                        `,r[l].classList.add("image-hover","has-image");const f=r[l].querySelector(".delete-photo");f&&(f.onclick=h=>{h.stopPropagation();const b=`
                                    <div class="w-full h-full flex flex-col items-center justify-center">
                                        <i data-lucide="plus" class="w-8 h-8 mb-1"></i>
                                        <span class="text-xs">·∫¢nh ${l+1}</span>
                                    </div>
                                `;r[l].innerHTML=b,r[l].classList.remove("image-hover","has-image"),typeof lucide<"u"&&lucide.createIcons()})}})}const c=document.getElementById("save-status");return c&&(c.textContent="ƒêang ch·ªânh s·ª≠a nh·∫≠t k√Ω c≈©",c.classList.add("text-yellow-500")),setTimeout(()=>{var r;(r=document.getElementById("content"))==null||r.focus()},300),setTimeout(()=>{p.setupPhotoUpload()},100),!0}catch(e){return console.error("L·ªói khi t·∫£i entry ƒë·ªÉ ch·ªânh s·ª≠a:",e),p.showNotification("L·ªói: Kh√¥ng th·ªÉ t·∫£i nh·∫≠t k√Ω","error"),!1}}}class x{static loadTimelineEntries(){try{const t=document.querySelector(".timeline-container");if(!t)return;const e=document.getElementById("timeline-loading");e&&e.classList.remove("hidden");const o=w.get("diaryEntries",[]),n=w.get("moments",[]);let i=[...o.map(l=>({...l,type:"entry"})),...n.map(l=>({...l,type:"moment"}))].sort((l,f)=>(f.timestamp||0)-(l.timestamp||0));i=this.applyFilters(i);const s=t.querySelectorAll(".timeline-item"),c=Array.from(s).slice(0,2);Array.from(s).slice(2).forEach(l=>l.remove());let d=document.getElementById("timeline-items-container");if(d?d.innerHTML="":(d=document.createElement("div"),d.id="timeline-items-container",t.appendChild(d)),i.length===0){const l=document.createElement("div");l.className="timeline-item text-center p-8 text-soft",l.innerHTML=`
                    <i data-lucide="calendar" class="w-12 h-12 mx-auto mb-4 opacity-20"></i>
                    <p>Ch∆∞a c√≥ d·ªØ li·ªáu ƒë·ªÉ hi·ªÉn th·ªã</p>
                `,d.appendChild(l),typeof lucide<"u"&&lucide.createIcons(),e&&e.classList.add("hidden");return}i.forEach((l,f)=>{const h=this.createTimelineItem(l,f);h.style.animationDelay=`${f*.1}s`,d.appendChild(h)}),e&&e.classList.add("hidden"),typeof lucide<"u"&&lucide.createIcons()}catch(t){console.error("L·ªói khi t·∫£i timeline:",t);const e=document.getElementById("timeline-loading");e&&e.classList.add("hidden")}}static applyFilters(t){const e=document.getElementById("search-input"),o=e?e.value.toLowerCase().trim():"",n=document.getElementById("mood-filter"),i=n?n.value:"",s=document.getElementById("type-filter"),c=s?s.value:"";return t.filter(r=>!(o&&![r.content||"",r.achievements||"",r.stress||"",r.highlight||"",r.name||"",r.description||"",r.gratitude1||"",r.gratitude2||"",r.gratitude3||""].join(" ").toLowerCase().includes(o)||i&&r.mood!==i||c&&(c==="entry"&&r.type!=="entry"||c==="moment"&&r.type!=="moment")))}static createTimelineItem(t,e){const o=t.type==="entry",n=document.createElement("div");return n.className="timeline-item",o?n.innerHTML=`
                <div class="bg-card p-6 rounded-card shadow-soft card-glow hover:transform hover:scale-[1.02] transition-all duration-300">
                    <div class="flex justify-between items-start mb-3">
                        <div>
                            <span class="inline-block px-3 py-1 rounded-full text-xs font-semibold bg-accent-light text-accent mb-2">
                                <i data-lucide="book-open" class="w-3 h-3 inline mr-1"></i> Nh·∫≠t k√Ω
                            </span>
                            <h3 class="font-bold text-lg">${t.date||"Kh√¥ng c√≥ ng√†y"}</h3>
                        </div>
                        <div class="flex flex-col items-end">
                            <span class="text-3xl">${t.mood||"üòä"}</span>
                            <div class="flex space-x-2 mt-2">
                                <button onclick="editEntry('${t.id}')" class="text-xs px-3 py-1 bg-blue-100 text-blue-800 rounded-full hover:bg-blue-200 transition">
                                    <i data-lucide="edit" class="w-3 h-3 inline mr-1"></i>S·ª≠a
                                </button>
                                <button onclick="deleteEntry('${t.id}')" class="text-xs px-3 py-1 bg-red-100 text-red-800 rounded-full hover:bg-red-200 transition">
                                    <i data-lucide="trash-2" class="w-3 h-3 inline mr-1"></i>X√≥a
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    ${t.highlight?`
                        <div class="mb-4 p-3 rounded-lg bg-yellow-50 border border-yellow-100">
                            <div class="flex items-center text-yellow-800 mb-1">
                                <i data-lucide="star" class="w-4 h-4 mr-2"></i>
                                <span class="font-semibold">Kho·∫£nh kh·∫Øc ƒë·∫πp:</span>
                            </div>
                            <p class="text-sm">${t.highlight}</p>
                        </div>
                    `:""}
                    
                    ${t.achievements?`
                        <div class="mb-3">
                            <span class="font-semibold text-accent">üéØ Th√†nh t·ª±u:</span>
                            <p class="text-sm mt-1">${t.achievements}</p>
                        </div>
                    `:""}
                    
                    ${t.stress?`
                        <div class="mb-3">
                            <span class="font-semibold text-accent">‚ö†Ô∏è CƒÉng th·∫≥ng:</span>
                            <p class="text-sm mt-1">${t.stress}</p>
                        </div>
                    `:""}
                    
                    ${t.content?`
                        <div class="mb-3">
                            <span class="font-semibold text-accent">üìù N·ªôi dung:</span>
                            <p class="text-sm mt-1 line-clamp-3">${t.content}</p>
                        </div>
                    `:""}
                    
                    ${t.gratitude1||t.gratitude2||t.gratitude3?`
                        <div class="mb-3">
                            <span class="font-semibold text-accent">üôè Bi·∫øt ∆°n:</span>
                            <ul class="text-sm mt-1 space-y-1">
                                ${t.gratitude1?`<li>‚Ä¢ ${t.gratitude1}</li>`:""}
                                ${t.gratitude2?`<li>‚Ä¢ ${t.gratitude2}</li>`:""}
                                ${t.gratitude3?`<li>‚Ä¢ ${t.gratitude3}</li>`:""}
                            </ul>
                        </div>
                    `:""}
                    
                    ${t.selfCare&&t.selfCare.length>0?`
                        <div class="mt-4 pt-3 border-t border-gray-100">
                            <span class="font-semibold text-accent">üíÜ‚Äç‚ôÄÔ∏è Self-care:</span>
                            <div class="flex flex-wrap gap-1 mt-2">
                                ${t.selfCare.map(i=>`
                                    <span class="px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full">${i}</span>
                                `).join("")}
                            </div>
                        </div>
                    `:""}
                    
                    ${t.photos&&t.photos.length>0?`
                        <div class="mt-4 pt-3 border-t border-gray-100">
                            <span class="font-semibold text-accent">üì∏ ·∫¢nh:</span>
                            <div class="flex space-x-2 mt-2 overflow-x-auto">
                                ${t.photos.slice(0,3).map(i=>`
                                    <img src="${i}" alt="Photo" class="w-20 h-20 object-cover rounded-lg flex-shrink-0">
                                `).join("")}
                            </div>
                        </div>
                    `:""}
                    
                    <div class="mt-4 pt-3 border-t border-gray-100 text-xs text-soft">
                        <i data-lucide="clock" class="w-3 h-3 inline mr-1"></i>
                        ${t.timestamp?new Date(t.timestamp).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}):"Kh√¥ng c√≥ th·ªùi gian"}
                    </div>
                </div>
            `:n.innerHTML=`
                <div class="bg-card p-6 rounded-card shadow-soft card-glow hover:transform hover:scale-[1.02] transition-all duration-300">
                    <div class="flex justify-between items-start mb-3">
                        <div>
                            <span class="inline-block px-3 py-1 rounded-full text-xs font-semibold bg-purple-100 text-purple-800 mb-2">
                                <i data-lucide="sparkles" class="w-3 h-3 inline mr-1"></i> Kho·∫£nh kh·∫Øc
                            </span>
                            <h3 class="font-bold text-lg">${t.name||"Kh√¥ng c√≥ t√™n"}</h3>
                            <p class="text-sm text-soft">${t.date||"Kh√¥ng c√≥ ng√†y"}</p>
                        </div>
                        <span class="text-3xl">${t.mood||"‚≠ê"}</span>
                    </div>
                    
                    ${t.description?`
                        <div class="mb-4">
                            <p class="text-sm">${t.description}</p>
                        </div>
                    `:""}
                    
                    <div class="mt-4 pt-3 border-t border-gray-100 text-xs text-soft">
                        <i data-lucide="clock" class="w-3 h-3 inline mr-1"></i>
                        ${t.timestamp?new Date(t.timestamp).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}):"Kh√¥ng c√≥ th·ªùi gian"}
                        ${t.type==="highlight"?' ‚Ä¢ <span class="text-yellow-600">T·ª´ highlight nh·∫≠t k√Ω</span>':""}
                    </div>
                </div>
            `,n}static clearFilters(){const t=document.getElementById("search-input"),e=document.getElementById("mood-filter"),o=document.getElementById("type-filter");t&&(t.value=""),e&&(e.value=""),o&&(o.value=""),this.loadTimelineEntries(),p.showNotification("ƒê√£ x√≥a t·∫•t c·∫£ b·ªô l·ªçc","info")}}class k{static saveReflection(){var t,e,o;try{const n=new Date,i=n.getMonth()+1,s=n.getFullYear(),c={id:`reflection_${s}_${i}_${Math.random().toString(36).substr(2,9)}`,month:i,year:s,learned:((t=document.getElementById("learned"))==null?void 0:t.value.trim())||"",proudOf:((e=document.getElementById("proud-of"))==null?void 0:e.value.trim())||"",improvement:((o=document.getElementById("improvement"))==null?void 0:o.value.trim())||"",timestamp:n.getTime()},r=`monthlyReflections_${s}_${i}`;return w.set(r,c),p.showNotification("Reflection ƒë√£ ƒë∆∞·ª£c l∆∞u! üìù","success"),!0}catch(n){return console.error("L·ªói khi l∆∞u reflection:",n),p.showNotification("L·ªói: Kh√¥ng th·ªÉ l∆∞u reflection","error"),!1}}static loadReflection(){try{const t=new Date,e=t.getMonth()+1,n=`monthlyReflections_${t.getFullYear()}_${e}`,i=w.get(n,{}),s=["Th√°ng 1","Th√°ng 2","Th√°ng 3","Th√°ng 4","Th√°ng 5","Th√°ng 6","Th√°ng 7","Th√°ng 8","Th√°ng 9","Th√°ng 10","Th√°ng 11","Th√°ng 12"],c=document.querySelector("#reflection-page h1");return c&&(c.textContent=`Reflection ${s[e-1]}`),document.getElementById("learned").value=i.learned||"",document.getElementById("proud-of").value=i.proudOf||"",document.getElementById("improvement").value=i.improvement||"",i}catch(t){return console.error("L·ªói khi t·∫£i reflection:",t),{}}}}const M={"üò¢":1,"üò°":2,"üò¥":3,"üòä":4,"‚ú®":5},Y={"üò¢":"Bu·ªìn","üò°":"T·ª©c gi·∫≠n","üò¥":"M·ªát m·ªèi","üòä":"Vui v·∫ª","‚ú®":"Tuy·ªát v·ªùi"},B={"üòä":"#AEE6E6","üò¢":"#ADD8E6","üò°":"#FFC0CB","üò¥":"#D8BFD8","‚ú®":"#7FC7C7"};class C{static generateWeeklyData(t){const e=["CN","T2","T3","T4","T5","T6","T7"],o=[];for(let n=6;n>=0;n--){const i=new Date;i.setDate(i.getDate()-n);const s=i.toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit"}),c=t.find(r=>r.date===s);o.push({day:e[i.getDay()],moodValue:c?M[c.mood]||3:0,mood:c?c.mood:"",date:s,hasEntry:!!c})}return o}static drawWeeklyChart(t){const e=document.getElementById(t);if(!e)return;const o=w.get("diaryEntries",[]),n=this.generateWeeklyData(o);if(e.innerHTML="",!n.some(h=>h.hasEntry)){e.innerHTML=`
                <div class="text-center text-soft p-8">
                    <i data-lucide="bar-chart" class="w-12 h-12 mx-auto mb-4 opacity-20"></i>
                    <p>Ch∆∞a c√≥ d·ªØ li·ªáu tu·∫ßn n√†y</p>
                </div>`,typeof lucide<"u"&&lucide.createIcons();return}const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("viewBox","0 0 500 300"),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("preserveAspectRatio","xMidYMid meet");const c=getComputedStyle(document.body).getPropertyValue("--button-bg").trim(),r=getComputedStyle(document.body).getPropertyValue("--accent").trim(),d=getComputedStyle(document.body).getPropertyValue("--text-soft").trim();n.forEach((h,b)=>{const y=80+b*60,g=h.hasEntry?h.moodValue/5*180:10,u=240-g,m=document.createElementNS("http://www.w3.org/2000/svg","rect");m.setAttribute("x",y-20),m.setAttribute("y",u),m.setAttribute("width","40"),m.setAttribute("height",g),m.setAttribute("fill",h.hasEntry?c:"#E5E7EB"),m.setAttribute("rx","8"),m.setAttribute("opacity",h.hasEntry?"0.8":"0.3"),m.style.transition="all 0.3s ease",m.addEventListener("mouseenter",()=>{m.setAttribute("opacity","1")}),m.addEventListener("mouseleave",()=>{m.setAttribute("opacity",h.hasEntry?"0.8":"0.3")}),s.appendChild(m);const v=document.createElementNS("http://www.w3.org/2000/svg","text");if(v.setAttribute("x",y),v.setAttribute("y","270"),v.setAttribute("text-anchor","middle"),v.setAttribute("fill",d),v.setAttribute("font-weight","bold"),v.textContent=h.day,s.appendChild(v),h.hasEntry&&h.mood&&h.moodValue>0){const E=document.createElementNS("http://www.w3.org/2000/svg","text");E.setAttribute("x",y),E.setAttribute("y",u-10),E.setAttribute("text-anchor","middle"),E.setAttribute("fill",c),E.setAttribute("font-size","20"),E.textContent=h.mood,s.appendChild(E)}});for(let h=1;h<=5;h++){const b=240-h/5*180,y=document.createElementNS("http://www.w3.org/2000/svg","text");y.setAttribute("x","50"),y.setAttribute("y",b+3),y.setAttribute("text-anchor","end"),y.setAttribute("fill",d),y.setAttribute("font-size","12"),y.textContent=h,s.appendChild(y)}const l=document.createElementNS("http://www.w3.org/2000/svg","line");l.setAttribute("x1","60"),l.setAttribute("y1","240"),l.setAttribute("x2","440"),l.setAttribute("y2","240"),l.setAttribute("stroke",r),l.setAttribute("stroke-width","2"),s.appendChild(l);const f=document.createElementNS("http://www.w3.org/2000/svg","line");f.setAttribute("x1","60"),f.setAttribute("y1","60"),f.setAttribute("x2","60"),f.setAttribute("y2","240"),f.setAttribute("stroke",r),f.setAttribute("stroke-width","2"),s.appendChild(f),e.appendChild(s)}static generateMoodFrequencyData(t){const e={"üò¢":0,"üò°":0,"üò¥":0,"üòä":0,"‚ú®":0};return t.forEach(o=>{e.hasOwnProperty(o.mood)&&e[o.mood]++}),e}static drawPieChart(t){const e=document.getElementById(t);if(!e)return;const o=w.get("diaryEntries",[]),n=this.generateMoodFrequencyData(o),i=Object.values(n).reduce((u,m)=>u+m,0);if(e.innerHTML="",i===0){e.innerHTML=`
                <div class="text-center text-soft p-8">
                    <i data-lucide="pie-chart" class="w-12 h-12 mx-auto mb-4 opacity-20"></i>
                    <p>Ch∆∞a c√≥ d·ªØ li·ªáu</p>
                </div>`,typeof lucide<"u"&&lucide.createIcons();return}const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("viewBox","0 0 200 200"),s.setAttribute("width","200"),s.setAttribute("height","200"),s.setAttribute("class","mx-auto");const c=100,r=100,d=80;let l=0;const f={};Object.entries(n).forEach(([u,m])=>{m>0&&(f[u]=m/i*100)}),Object.entries(f).forEach(([u,m])=>{if(m>0){const v=m/100*360,E=l,F=E+v,I=(E-90)*Math.PI/180,$=(F-90)*Math.PI/180,H=c+d*Math.cos(I),R=r+d*Math.sin(I),_=c+d*Math.cos($),U=r+d*Math.sin($),K=v>180?1:0,S=document.createElementNS("http://www.w3.org/2000/svg","path");S.setAttribute("d",`
                    M ${c} ${r}
                    L ${H} ${R}
                    A ${d} ${d} 0 ${K} 1 ${_} ${U}
                    Z
                `),S.setAttribute("fill",B[u]),S.setAttribute("stroke","white"),S.setAttribute("stroke-width","2"),s.appendChild(S),l+=v}});const h=document.createElementNS("http://www.w3.org/2000/svg","circle");h.setAttribute("cx",c),h.setAttribute("cy",r),h.setAttribute("r",d*.3),h.setAttribute("fill","white"),s.appendChild(h);const b=document.createElementNS("http://www.w3.org/2000/svg","text");b.setAttribute("x",c),b.setAttribute("y",r),b.setAttribute("text-anchor","middle"),b.setAttribute("dy","5"),b.setAttribute("font-weight","bold"),b.setAttribute("fill",getComputedStyle(document.body).getPropertyValue("--accent").trim()),b.textContent=i,s.appendChild(b);const y=document.createElementNS("http://www.w3.org/2000/svg","text");y.setAttribute("x",c),y.setAttribute("y",r+15),y.setAttribute("text-anchor","middle"),y.setAttribute("font-size","10"),y.setAttribute("fill",getComputedStyle(document.body).getPropertyValue("--text-soft").trim()),y.textContent="m·ª•c",s.appendChild(y),e.appendChild(s);const g=document.createElement("div");g.className="mt-6 flex flex-col gap-2",Object.entries(f).forEach(([u,m])=>{if(m>0){const v=n[u],E=document.createElement("div");E.className="flex items-center justify-between",E.innerHTML=`
                    <div class="flex items-center space-x-3">
                        <span class="w-4 h-4 rounded-full" style="background-color: ${B[u]}"></span>
                        <span class="text-sm">${u} ${Y[u]}</span>
                    </div>
                    <div class="text-sm font-semibold">${Math.round(m)}% (${v})</div>
                `,g.appendChild(E)}}),e.appendChild(g)}static updateReportStats(){const t=w.get("diaryEntries",[]),e=(g,u)=>{const m=document.getElementById(g);m&&(m.textContent=u)};if(t.length===0){e("most-positive-day","--/--/----"),e("stressful-day","--/--/----"),e("days-written","0"),e("positive-rate","0%"),e("checklist-completed","0%"),e("avg-time","0 ph√∫t"),e("most-frequent-mood","üòä"),e("mood-percentage","0%"),e("most-positive-mood","‚ú®"),e("most-stressful-mood","üò°");return}const o=t.map(g=>{var u;return{date:g.date,mood:g.mood,moodValue:M[g.mood]||3,contentLength:((u=g.content)==null?void 0:u.length)||0}}),n=o.reduce((g,u)=>u.moodValue>g.moodValue?u:g,{moodValue:0,date:"--/--/----",mood:"‚ú®"}),i=o.reduce((g,u)=>u.moodValue<g.moodValue?u:g,{moodValue:6,date:"--/--/----",mood:"üò°"});e("most-positive-day",n.date||"--/--/----"),e("most-positive-mood",n.mood||"‚ú®"),e("stressful-day",i.date||"--/--/----"),e("most-stressful-mood",i.mood||"üò°"),e("days-written",t.length);const s=t.filter(g=>g.mood==="üòä"||g.mood==="‚ú®").length;e("positive-rate",`${Math.round(s/t.length*100)}%`);let c=0,r=0;t.forEach(g=>{var u;c+=6,r+=((u=g.selfCare)==null?void 0:u.length)||0});const d=c>0?Math.round(r/c*100):0;e("checklist-completed",`${d}%`);const l=t.reduce((g,u)=>{var m;return g+(((m=u.content)==null?void 0:m.length)||0)},0),f=t.length>0?l/t.length:0,h=Math.max(1,Math.round(f/50));e("avg-time",`${h} ph√∫t`);const b=this.generateMoodFrequencyData(t),y=Object.values(b).reduce((g,u)=>g+u,0);if(y>0){const g=Object.entries(b).reduce((m,v)=>m[1]>v[1]?m:v),u=Math.round(g[1]/y*100);e("most-frequent-mood",g[0]),e("mood-percentage",`${u}%`)}else e("most-frequent-mood","üòä"),e("mood-percentage","0%")}static drawCharts(){this.drawWeeklyChart("weekly-chart"),this.drawPieChart("pie-chart"),this.updateReportStats()}}class J{static initialize(){console.log("Initializing report..."),C&&C.drawCharts()}static refresh(){this.initialize()}}/**
 * @license lucide v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=([a,t,e])=>{const o=document.createElementNS("http://www.w3.org/2000/svg",a);return Object.keys(t).forEach(n=>{o.setAttribute(n,String(t[n]))}),e!=null&&e.length&&e.forEach(n=>{const i=V(n);o.appendChild(i)}),o},X=(a,t={})=>{const e="svg",o={...N,...t};return V([e,o,a])};/**
 * @license lucide v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=a=>Array.from(a.attributes).reduce((t,e)=>(t[e.name]=e.value,t),{}),Z=a=>typeof a=="string"?a:!a||!a.class?"":a.class&&typeof a.class=="string"?a.class.split(" "):a.class&&Array.isArray(a.class)?a.class:"",Q=a=>a.flatMap(Z).map(e=>e.trim()).filter(Boolean).filter((e,o,n)=>n.indexOf(e)===o).join(" "),tt=a=>a.replace(/(\w)(\w*)(_|-|\s*)/g,(t,e,o)=>e.toUpperCase()+o.toLowerCase()),P=(a,{nameAttr:t,icons:e,attrs:o})=>{var f;const n=a.getAttribute(t);if(n==null)return;const i=tt(n),s=e[i];if(!s)return console.warn(`${a.outerHTML} icon name was not found in the provided icons object.`);const c=G(a),r={...N,"data-lucide":n,...o,...c},d=Q(["lucide",`lucide-${n}`,c,o]);d&&Object.assign(r,{class:d});const l=X(s,r);return(f=a.parentNode)==null?void 0:f.replaceChild(l,a)};/**
 * @license lucide v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=({icons:a={},nameAttr:t="data-lucide",attrs:e={},root:o=document,inTemplates:n}={})=>{if(!Object.values(a).length)throw new Error(`Please provide an icons object.
If you want to use all the icons you can import it like:
 \`import { createIcons, icons } from 'lucide';
lucide.createIcons({icons});\``);if(typeof o>"u")throw new Error("`createIcons()` only works in a browser environment.");if(Array.from(o.querySelectorAll(`[${t}]`)).forEach(s=>P(s,{nameAttr:t,icons:a,attrs:e})),n&&Array.from(o.querySelectorAll("template")).forEach(c=>q({icons:a,nameAttr:t,attrs:e,root:c.content,inTemplates:n})),t==="data-lucide"){const s=o.querySelectorAll("[icon-name]");s.length>0&&(console.warn("[Lucide] Some icons were found with the now deprecated icon-name attribute. These will still be replaced for backwards compatibility, but will no longer be supported in v1.0 and you should switch to data-lucide"),Array.from(s).forEach(c=>P(c,{nameAttr:"icon-name",icons:a,attrs:e})))}},L={currentView:"diary"};function et(){const a=A.saveDailyEntry();return a&&(p.updateStreakCounter(),setTimeout(()=>{p.showNotification("Nh·∫≠t k√Ω ƒë√£ ƒë∆∞·ª£c l∆∞u v√† reset s·∫µn s√†ng cho ng√†y m·ªõi! üéâ","success")},500)),a}function ot(a){return A.loadEntryForEdit(a)}function nt(a){return confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a nh·∫≠t k√Ω n√†y kh√¥ng?")?A.deleteEntry(a):!1}function it(){var s,c;const a=(s=document.getElementById("moment-name"))==null?void 0:s.value.trim(),t=(c=document.getElementById("moment-desc"))==null?void 0:c.value.trim();if(!a)return p.showNotification("Vui l√≤ng nh·∫≠p t√™n kho·∫£nh kh·∫Øc","warning"),!1;const e=new Date,o=e.toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit"}),n={id:`moment_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:a,description:t,date:o,mood:"‚≠ê",type:"manual",timestamp:e.getTime()};let i=w.get("moments",[]);return i.unshift(n),w.set("moments",i),document.getElementById("moment-name").value="",document.getElementById("moment-desc").value="",document.getElementById("moment-input").classList.add("hidden"),p.showNotification("Kho·∫£nh kh·∫Øc ƒë√£ ƒë∆∞·ª£c l∆∞u! üåü","success"),L.currentView==="timeline"&&x.loadTimelineEntries(),!0}function st(){return k.saveReflection()}function at(){return p.exportData()}function rt(){return x.clearFilters()}function O(a){console.log("Switching to view:",a),L.currentView=a,document.querySelectorAll(".view").forEach(o=>{o.classList.add("hidden")});const t=document.getElementById(`${a}-page`);t&&(console.log("Showing view:",t.id),t.classList.remove("hidden")),document.querySelectorAll(".nav-item").forEach(o=>{o.classList.remove("bg-accent-light","font-bold"),o.style.backgroundColor=""});const e=document.querySelector(`.nav-item[data-view="${a}"]`);if(e){const o=getComputedStyle(document.body).getPropertyValue("--accent-light");e.classList.add("bg-accent-light","font-bold"),e.style.backgroundColor=o}switch(a){case"diary":console.log("Loading diary..."),A.loadTodayEntry();break;case"report":console.log("Loading report..."),C&&C.drawCharts();break;case"timeline":console.log("Loading timeline..."),x&&x.loadTimelineEntries();break;case"reflection":console.log("Loading reflection..."),k&&k.loadReflection();break}return window.scrollTo({top:0,behavior:"smooth"}),!0}function j(){const a=document.getElementById("theme-panel");a.classList.contains("hidden")?(a.classList.remove("hidden"),a.classList.add("animate-fadeIn"),a.classList.remove("animate-fadeOut")):(a.classList.add("animate-fadeOut"),setTimeout(()=>{a.classList.add("hidden"),a.classList.remove("animate-fadeOut")},300))}function ct(){const a=document.getElementById("moment-input");a.classList.contains("hidden")?(a.classList.remove("hidden"),a.classList.add("animate-fadeIn"),a.classList.remove("animate-fadeOut"),document.getElementById("moment-name").value="",document.getElementById("moment-desc").value="",setTimeout(()=>{document.getElementById("moment-name").focus()},100)):(a.classList.add("animate-fadeOut"),setTimeout(()=>{a.classList.add("hidden"),a.classList.remove("animate-fadeOut")},300))}function lt(){x&&x.loadTimelineEntries()}function dt(){L.currentView==="report"&&C&&C.drawCharts()}function ut(){document.querySelectorAll(".mood-btn").forEach(a=>{a.addEventListener("click",t=>{const e=getComputedStyle(document.body).getPropertyValue("--button-bg"),o=getComputedStyle(document.body).getPropertyValue("--accent-light");document.querySelectorAll(".mood-btn").forEach(n=>{n.style.backgroundColor=o,n.classList.remove("ring-4","ring-offset-2","ring-accent-light/50")}),t.currentTarget.style.backgroundColor=e,t.currentTarget.classList.add("ring-4","ring-offset-2","ring-accent-light/50"),t.currentTarget.style.transform="scale(0.95)",setTimeout(()=>{t.currentTarget.style.transform=""},150)})})}function mt(){document.querySelectorAll(".pastel-checkbox").forEach(a=>{const t=a.querySelector('input[type="checkbox"]');a.addEventListener("click",e=>{setTimeout(()=>{if(t.checked){const o=a.querySelector(".checkbox-icon");o.classList.add("animate-bounce-once"),setTimeout(()=>{o.classList.remove("animate-bounce-once")},500)}},0)})})}function ht(){let a;const t=()=>{clearTimeout(a),a=setTimeout(()=>{const e=document.getElementById("save-status");e&&(e.textContent="ƒêang l∆∞u...",e.classList.add("text-blue-500"),setTimeout(()=>{e.textContent="ƒê√£ l∆∞u t·ª± ƒë·ªông",e.classList.remove("text-blue-500")},500))},2e3)};document.querySelectorAll('textarea, input[type="text"]').forEach(e=>{e.addEventListener("input",t)})}function T(){console.log("Initializing app..."),q(),w.initializeDefaults(),z();const t=new Date().toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit"}),e=document.getElementById("current-date");e&&(e.textContent=t),ut(),mt(),p.setupPhotoUpload(),ht(),p.updateStreakCounter(),A.loadTodayEntry(),O(L.currentView);const o=document.getElementById("search-input");o&&o.addEventListener("input",()=>{x&&x.loadTimelineEntries()}),document.addEventListener("click",n=>{const i=document.getElementById("theme-panel"),s=document.getElementById("theme-toggle");i&&!i.contains(n.target)&&s&&!s.contains(n.target)&&!i.classList.contains("hidden")&&j()}),console.log("App initialized successfully!")}window.switchView=O;window.toggleThemePanel=j;window.setTheme=D;window.showMomentInput=ct;window.filterTimelineEntries=lt;window.saveDailyEntry=et;window.saveMoment=it;window.saveReflection=st;window.clearFilters=rt;window.exportData=at;window.resizeChart=dt;window.editEntry=ot;window.deleteEntry=nt;window.TimelineManager=x;window.ChartManager=C;window.ReportManager=J;window.refreshReport=function(){C&&C.drawCharts(),p.showNotification("B√°o c√°o ƒë√£ ƒë∆∞·ª£c l√†m m·ªõi!","success")};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",T):T();document.readyState==="loading"?document.addEventListener("DOMContentLoaded",T):T();
